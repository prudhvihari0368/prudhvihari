<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Food Table</title>
    <style>
        body {
            font-family: Poppins, sans-serif;
            text-align: center;
            margin: 20px 2px;
        }

        table {
            /* width: 60%; */
            border-collapse: collapse;
            margin: auto;
            max-width: 100%;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
            width: max-content;
        }

        th {
            background-color: #f2f2f2;
        }

        td img {
            width: 60px;
            margin: auto;
        }

        .quantity-input {
            display: flex;
            align-items: center;
        }

        .btn-decrement,
        .btn-increment,
        input {
            border: none;
            font-size: 18px;
            width: 35px;
            height: 35px;
            text-align: center;
            margin: 3px;
            font-weight: bold;
        }

        .btn-decrement,
        .btn-increment {
            cursor: pointer;
            margin: 0;
            border-radius: 50%;
        }
       
        .btn-decrement{
            background-color: #e57373;
        }
        .btn-increment{
            background-color: #87d37c;
        }

        .skipButton {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 12px 20px;
            width: max-content;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 20px;
        }

        .error-message {
            font-size: 18px;
            color: red;
            text-align: center;
            margin-top: 20px;
            display: none;
            /* Initially hidden */
        }

    </style>

</head>

<body>
    <div id="errorMessage" class="error-message">
        Error: You cannot go back to the home page.
    </div>
    
    

    <h2>Food Information</h2>

    <table>
        <thead>
            <tr>
                <th>S.No</th>
                <th>Food Image</th>
                <th>Food Name</th>
                <th>Quantity</th>
                <th>Cost</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="5">In the Interval</td>
            </tr>
            <tr>
                <td>1</td>
                <td><img src="/vadapav&tea.jpg" alt="Food 1"></td>
                <td id="food_name_1">2 Vada Paav and 1 Tea</td>
                <td>
                    <div class="quantity-input">
                        <button class="btn-decrement" data-target="quantity_1">-</button>
                        <input type="text" class="quantity" id="quantity_1" min="0" readonly value="1">
                        <button class="btn-increment" data-target="quantity_1">+</button>
                    </div>
                </td>
                <td id="total_cost_1">$12.00</td>
            </tr>
            <tr>
                <td>2</td>
                <td><img src="/Tea.jpg" alt="Food 2"></td>
                <td id="food_name_2">Tea</td>
                <td>
                    <div class="quantity-input">
                        <button class="btn-decrement" data-target="quantity_2">-</button>
                        <input type="text" class="quantity" id="quantity_2" min="0" readonly value="1">
                        <button class="btn-increment" data-target="quantity_2">+</button>
                    </div>
                </td>
                <td id="total_cost_2">$4.00</td>
            </tr>
            <tr>
                <td colspan="5">After Show Dinner Takeaway box</td>
            </tr>
            <tr>
                <td>3</td>
                <td><img src="/rice&tadka.jpg" alt="Food 3"></td>
                <td id="food_name_3">Rice, Paneer Butter masala and Daal tadka</td>
                <td>
                    <div class="quantity-input">
                        <button class="btn-decrement" data-target="quantity_3">-</button>
                        <input type="text" class="quantity" id="quantity_3" min="0" readonly value="1">
                        <button class="btn-increment" data-target="quantity_3">+</button>
                    </div>
                </td>
                <td id="total_cost_3">$12.00</td>
            </tr>
            <tr>
                <!-- <td ></td> -->
                <td colspan="3"></td>
                <td style="border-left: none;">Total Cost</td>
                <td id="totalCost">$28.00</td>
            </tr>
        </tbody>
    </table>
    <br>
    <button type="submit" class="skipButton" id="skipButton">Skip Pre-ordering</button>

    <script>
        // Fetch the desired number from another webpage
        // In this example, it's a hardcoded value. Replace it with your logic to fetch the number dynamically.
        const desiredNumber = 2;

        document.querySelectorAll('.btn-increment').forEach(button => {
            button.addEventListener('click', () => {
                const targetInput = button.dataset.target;
                const inputElement = document.getElementById(targetInput);
                const currentValue = parseInt(inputElement.value, 10);

                if (currentValue < desiredNumber * 2) {
                    inputElement.value = currentValue + 1;
                    updateCost(targetInput);
                }
                updateIncrementButtonStyle(targetInput); // Update the style on increment
            });
        });

        document.querySelectorAll('.btn-decrement').forEach(button => {
            button.addEventListener('click', () => {
                const targetInput = button.dataset.target;
                const inputElement = document.getElementById(targetInput);
                const currentValue = parseInt(inputElement.value, 10);
                if (currentValue > 0) {
                    inputElement.value = currentValue - 1;
                    updateCost(targetInput);
                }
                updateDecrementButtonStyle(targetInput); // Update the style on decrement
                updateIncrementButtonStyle(targetInput); // Update the style on decrement
            });
        });

        function updateDecrementButtonStyle(targetId) {
            const decrementButton = document.querySelector(`.btn-decrement[data-target="${targetId}"]`);
            const quantity = parseInt(document.getElementById(targetId).value, 10);

            if (quantity > 0) {
                decrementButton.style.backgroundColor = '#e57373'; // Blue color
                decrementButton.style.color = '#fff'; // White text color
            } else {
                decrementButton.style.backgroundColor = '#ccc'; // Grey color
                decrementButton.style.color = '#000'; // Black text color
            }
        }

        function updateIncrementButtonStyle(targetId) {
            const incrementButton = document.querySelector(`.btn-increment[data-target="${targetId}"]`);
            const quantity = parseInt(document.getElementById(targetId).value, 10);

            if (quantity >= desiredNumber * 2) {
                incrementButton.style.backgroundColor = '#ccc'; // Grey color
                incrementButton.style.color = '#000'; // Black text color
                incrementButton.disabled = true;
            } else {
                incrementButton.style.backgroundColor = '#87d37c'; // Blue color
                incrementButton.style.color = '#fff'; // White text color
                incrementButton.disabled = false;
            }
        }

        function updateCost(targetId) {
            const quantityInput = document.getElementById(targetId);
            const quantity = quantityInput.value;
            let cost = 0;

            switch (targetId) {
                case 'quantity_1':
                    cost = 12.00;
                    break;
                case 'quantity_2':
                    cost = 4.00;
                    break;
                case 'quantity_3':cost = 12; break;
                // Add more cases for additional rows
            }

            const totalCost = (quantity * cost).toFixed(2);
            const totalCostElement = document.getElementById(`total_cost_${targetId.slice(-1)}`);
            totalCostElement.textContent = `$${totalCost}`;

            // Update total cost
            updateTotalCost();
            // Update decrement button style
            updateDecrementButtonStyle(targetId);
            // Update increment button style
            updateIncrementButtonStyle(targetId);
        }

        function updateTotalCost() {
            const quantityInputs = document.querySelectorAll('.quantity');
            let totalCost = 0;

            quantityInputs.forEach(input => {
                const quantity = parseInt(input.value, 10);
                const targetId = input.id;
                let cost = 0;

                switch (targetId) {
                    case 'quantity_1':
                        cost = 12.00;
                        break;
                    case 'quantity_2':
                        cost = 4.00;
                        break;
                    case 'quantity_3':
                        cost = 12.00;
                        break;
                    // Add more cases for additional rows
                }

                totalCost += quantity * cost;

                const totalCostElement = document.getElementById('totalCost');
                totalCostElement.textContent = `$${totalCost.toFixed(2)}`;
            });
        }
    </script>
    <script type="text/javascript">
        // Prevent going back to the home page
        history.pushState(null, null, location.href);

        window.addEventListener('popstate', function (event) {
            // Show the error message
            var errorMessage = document.getElementById('errorMessage');
            errorMessage.style.display = 'block';

            // Move forward in the history to prevent going back
            history.pushState(null, null, location.href);
        });
    </script>
</body>

</html>
